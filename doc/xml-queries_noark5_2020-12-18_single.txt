_PARAMETERS_
query_name=Noark 5 Standard alene
query_date=2020-12-10
query_description=Kjører manuelt aktiverte job_enabled <> 0 Noark 5-queries [QA må gjøres mot xsd skjemaer Noark 5 v3.1, 4.0 & 5.0]

query_type=Noark5
query_subtype=3.1,4.0,5.0
query_version=0.2

tool_name=XML Queries
tool_version=0.6
tool_info=[Standard rapportnavn resultat: "kdrs_query_results_uttrekk.txt". Seksjoner: XML_QUERY og SQL_QUERY. Parameter job_enabled = 0 Kjøres ikke, = 1 Inkluderes i rapport hvis feltet aktivert i rapport, =2 Ikke inkludert i rapport, =3 Inkludert i rapport, men lagret til egen fil (postfix filnavn job_id).]

[XML_QUERY]

job_id=C01 
job_enabled=0 
job_name=Antall arkiver i arkivstrukturen
job_description=N5.04 Arkiv og Arkivskaper(e) info

system=noark5 
subsystem=
source=arkivstruktur.xml
target=noark5_analyse_{dt}.log

#START#
concat("N5.04 Antall arkiv: ", count(//arkiv)), " ", 
//arkiv/(concat("Tittel: ", tittel/text()) , 
concat("ID: ", systemID/text() ), 
concat("Start: ", opprettetDato/text(), ", Slutt: ", avsluttetDato/text() ), 
concat("Opprettet av: ", opprettetAv/text(), ", Avsluttet av: ", avsluttetAv/text() )),
" ", 
concat( "Arkivstrukturen inneholder ", count(//arkivskaper), " arkivskaper(e):"),
//arkivskaper/concat("Navn: ", arkivskaperNavn/text(), ", ID: ", arkivskaperID/text(), 
", Beskrivelse: ", beskrivelse/text() )
#STOP#

[XML_QUERY]

job_id=C02
job_enabled=0 
job_name=Antall arkivdeler i arkivstrukturen
job_description=N5.05/06 (C02/C04) Arkivdeler info 1

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
concat("N5.05/06 Antall arkivdeler: ", count(//arkivdel)), " ", 
//arkivdel/(concat('Tittel: "' , tittel),
concat("ID: ", systemID/text(), ", Beskrivelse: ", beskrivelse/text() ), 
concat("Status: ", arkivdelstatus/text(), ", StartPer: ", arkivperiodeStartDato/text(), ", SluttPer: ", arkivperiodeSluttDato/text() ), 
concat("Opprettet: ", opprettetDato/text(), ", Opprettet av: ", opprettetAv/text() ), 
concat("Avsluttet: ", avsluttetDato/text(), ", Avsluttet av: ", avsluttetAv/text() ), 
concat ("Dokumentmedium: ", dokumentmedium/text(),
", Forløper: ", referanseForloeper/text(), ", Avtaker: ", referanseAvtaker/text() ), 
" ") 
#STOP#

[XML_QUERY]

job_id=C03
job_enabled=0 
job_name=Arkivdelen(e)s status i arkivstrukturen
job_description=Arkivuttrekk Inngående og Utgående skille

system=noark5 
subsystem=
source=arkivuttrekk.xml 
target=noark5_analyse_{dt}.log

#START# 
"Arkivdelen(e)s status i arkivstrukturen: ", 
concat("Inngående skille: ", //property[@name="inngaaendeSkille"]/value),
concat("Utgående skille: ", //property[@name="utgaaendeSkille"]/value)
#STOP#

[XML_QUERY]

job_id=C05
job_enabled=0 
job_name=Antall klassifikasjonssystemer i arkivstrukturen
job_description=N5.07 Klassifikasjonssystemer info

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
concat("N5.07 Antall klassifikasjonssystemer: ", count(//klassifikasjonssystem)), " ", 
//arkivdel/(concat('Arkivdel: "' , tittel), " ", 
for $klassifikasjonssystem in descendant::klassifikasjonssystem
return 
(concat("Klassifikasjonssystem: ", $klassifikasjonssystem/tittel), 
concat("Type: ", $klassifikasjonssystem/klassifikasjonstype), 
concat("Beskrivelse: ", $klassifikasjonssystem/beskrivelse), 
concat("Opprettet dato: ", $klassifikasjonssystem/opprettetDato, ", Opprettet av: ", $klassifikasjonssystem/opprettetAv), 
concat("Avsluttet dato: ", $klassifikasjonssystem/avsluttetDato, ", Avsluttet av: ", $klassifikasjonssystem/avsluttetAv), 
concat("ID: ", $klassifikasjonssystem/systemID), " ") )
#STOP#

[XML_QUERY]

job_id=C06
job_enabled=0 
job_name=Antall klasser pr. arkivdel
job_description=N5.08 

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
concat("N5.08 Antall klasser: ", count(//klasse)), " ", 
"Antall klasser pr. arkivdel: ", " ", 
//arkivdel/(concat("Arkivdel '" , tittel, "': ", count(descendant::klasse)) ,
concat('level 1: ', count(descendant::klasse) - count(descendant::klasse/klasse)),
concat('level 2: ', count(descendant::klasse/klasse) - count(descendant::klasse/klasse/klasse)),
concat('level 3: ', count(descendant::klasse/klasse/klasse)), " ")
#STOP#

[XML_QUERY]

job_id=C06.01
job_enabled=0 
job_name=Antall klasser opprettetDato pr. år
job_description=N5.08.01

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
"N5.08.01 Antall klasser opprettDato pr. år: ", 
for $v in distinct-values(//klasse/opprettetDato/substring-before(., "-"))
return
(concat($v,": ", count(index-of(//klasse/opprettetDato/substring-before(., "-"), $v))))
#STOP#

[XML_QUERY]

job_id=C06.02
job_enabled=0 
job_name=Antall klasser opprettetDato
job_description=N5.08.02 [3][kjøres separat pga. for lang]

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
"N5.08.02 Antall klasser opprettetDato: ", 
for $v in distinct-values(//klasse/opprettetDato)
return
(concat($v,": ", count(index-of(//klasse/opprettetDato, $v))))
#STOP#

[XML_QUERY]

job_id=C06.03
job_enabled=0 
job_name=Antall klasser opprettetAv
job_description=N5.08.03

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
"N5.08.03 Antall klasser opprettAv: ", 
for $v in distinct-values(//klasse/opprettetAv)
return
(concat($v,": ", count(index-of(//klasse/opprettetAv, $v))))
#STOP#

[XML_QUERY]

job_id=C06.04
job_enabled=0 
job_name=Antall klasser avsluttetDato pr. år
job_description=N5.08.04

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
"N5.08.04 Antall klasser avsluttetDato pr. år: ",
for $v in distinct-values(//klasse/avsluttetDato/substring-before(., "-"))
return
(concat($v,": ", count(index-of(//klasse/avsluttetDato/substring-before(., "-"), $v))))
#STOP#

[XML_QUERY]

job_id=C06.05
job_enabled=0 
job_name=Antall klasser avsluttetDato
job_description=N5.08.05 [3][kjøres separat pga. for lang]

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
"N5.08.05 Antall klasser avsluttetDato: ", 
for $v in distinct-values(//klasse/avsluttetDato)
return
(concat($v,": ", count(index-of(//klasse/avsluttetDato, $v))))
#STOP#

[XML_QUERY]

job_id=C06.06
job_enabled=0 
job_name=Antall klasser avsluttetAv
job_description=N5.08.06

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
"N5.08.06 Antall klasser avsluttetAv: ", 
for $v in distinct-values(//klasse/avsluttetAv)
return
(concat($v,": ", count(index-of(//klasse/avsluttetAv, $v))))
#STOP#

[XML_QUERY]

job_id=C07
job_enabled=0 
job_name=Antall klasser uten underklasser, mapper eller registreringer
job_description=N5.09 Pr. arkivdel og klassifikasjonssystemer

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
"N5.09 Antall klasser uten underklasser, mapper eller registreringer pr. arkivdel og klassifikasjonssystemer: ", 
concat("Totalt alle mapper: ", count(//klasse[not (klasse or mappe or registrering)]) ), " ",
//arkivdel/(concat('Arkivdel: "' , tittel), 
for $sid in descendant::klassifikasjonssystem
return 
(concat("Klassifikasjonssystem: ", $sid/tittel, ': ', 
count($sid//klasse[not (klasse or mappe or registrering)])) ), " ")
#STOP#

[XML_QUERY]

job_id=C08
job_enabled=0 
job_name=Antall mapper pr. arkivdel og type
job_description=N5.10 

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
"N5.10 Antall mapper pr. arkivdel og type", 
concat("Totalt antall mapper: ", count(//mappe)), 
for $mappetype in distinct-values(//mappe/@xsi:type)
return
concat($mappetype, ': ', count(//mappe[@xsi:type=$mappetype])), 
concat('Mapper uten spesialisering: ', count(//mappe[count(@*)=3])), 
//arkivdel/(" ",
concat("Arkivdel: '" , tittel),
for $mappetype in distinct-values(descendant::mappe/@xsi:type)
return
concat($mappetype, ': ', count(descendant::mappe[@xsi:type=$mappetype])), 
concat('Mapper uten spesialisering: ', count(descendant::mappe[count(@*)=3])),
concat('Totalt: ', count(descendant::mappe)))
#STOP#

[XML_QUERY]

job_id=C08.01
job_enabled=0 
job_name=Antall mapper pr. mappenivå
job_description=N5.10.01

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
"N5.10.01 Antall mapper pr. nivå: ",
concat("Nivå 1: ", count(//arkivdel/descendant::mappe) - count(//arkivdel/descendant::mappe/mappe)),
concat("Nivå 2: ", count(//arkivdel/descendant::mappe/mappe) - count(//arkivdel/descendant::mappe/mappe/mappe)), 
concat("Nivå 3: ", count(//arkivdel/descendant::mappe/mappe/mappe) - 
count(//arkivdel/descendant::mappe/mappe/mappe/mappe)),
concat("Nivå 4: ", count(//arkivdel/descendant::mappe/mappe/mappe/mappe)),
concat("Totalt: ", count(//arkivdel/descendant::mappe))
#STOP#

[XML_QUERY]

job_id=C09
job_enabled=0 
job_name=Antall mapper pr. arkivdel og år
job_description=N5.11 [2][Hoppes over av rapportgenerering]

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
"N5.11 Antall mapper pr. arkivdel og år: ", 
sort(for $v in distinct-values(//mappe/opprettetDato/substring-before(., "-"))
return
(concat($v,": ", count(index-of(//mappe/opprettetDato/substring-before(., "-"), $v))))),
for $a in //arkivdel
return 
(" ", concat('Arkivdel: ' , $a/tittel) , sort(for $v in distinct-values($a//mappe/opprettetDato/substring-before(., "-"))
return
(concat($v,": ", count(index-of($a//mappe/opprettetDato/substring-before(., "-"), $v))))))
#STOP#

[XML_QUERY]

job_id=C10
job_enabled=0 
job_name=Kontroll mappe kun til klasse uten underklasser
job_description=N5.12 Avvik hvis > 0 (klasse med mappe skal ikke ha klasse under)

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
concat("N5.12 Antall klasser med både mappe og underklasse (>0 er avvik): ", count(//klasse[klasse]/mappe)), " ", 
//arkivdel/concat("Arkivdel '" , tittel, "': ", count(descendant::klasse[klasse]/mappe))
#STOP#

[XML_QUERY]

job_id=C11
job_enabled=0 
job_name=Antall mapper arkivdel og klasse
job_description=N5.13 [3][kjøres separat pga. for lang og mulig personlister]

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
"N5.13 Antall mapper pr. arkivdel og klasse: ",
for $a in //arkivdel
return
(" ", concat('Arkivdel ' , $a/tittel, ': '), 
for $ks in $a/klassifikasjonssystem
return
($ks/tittel/text(),
$ks//klasse[mappe]/concat('ID: "', klasseID, 
', Antall: "', count(mappe), 
', Tittel: "', tittel,'": ' , 
', Beskrivelse: ', beskrivelse) ))
#STOP#

[XML_QUERY]

job_id=C11.01
job_enabled=0 
job_name=Klasser uten innhold pr. arkivdel
job_description=N5.13.01 [3][kjøres separat pga. for lang]

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
"N5.13.01 Antall tomme klasser pr. arkivdel (>0 er avvik): ",
for $a in //arkivdel
return
(" ", concat('Arkivdel ' , $a/tittel, ': '), 
for $ks in $a/klassifikasjonssystem
return
($ks/tittel/text(),
$ks//klasse[not (klasse or mappe)]/concat('ID "', klasseID, 
', Tittel: "', tittel, ', Beskrivelse: ', beskrivelse) ))
#STOP#

[XML_QUERY]

job_id=C12
job_enabled=0 
job_name=Antall mapper uten undermapper eller registreringer
job_description=N5.14 F. eks. mappe opprettet ved feil eller innhold flyttet til annen mappe

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('N5.14 Antall mapper uten registreringer: ', count(//mappe[not (mappe or registrering)])), " ", 
//arkivdel/(concat("Arkivdel '" , tittel, "': ", 
count(descendant::mappe[not (mappe or registrering)])))
#STOP#

[XML_QUERY]

job_id=C13
job_enabled=0 
job_name=Antall mapper pr. arkivdel og status
job_description=N5.15

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.15 Antall mapper pr. arkivdel og status: ", 
concat('Alle mapper: ', count(//mappe)),
concat('"Avsluttet": ', count(//mappe[saksstatus='Avsluttet'])),
concat('"Utgår": ', count(//mappe[saksstatus='Utgår'])),
concat('"Under behandling": ', count(//mappe[sakstatus='Underbehandling'])),
concat('Alle møtemapper: ', count(//mappe[@xsi:type='moetemappe'])),
concat('Avsluttede møtemapper: ', count(//mappe[@xsi:type='moetemappe'][string-length (avsluttetDato/text()) > 0])),
" ",
//arkivdel/(concat("Arkivdel '" , tittel, "': "),
concat('Alle mapper: ', count(descendant::mappe)),
concat('"Avsluttet": ', count(descendant::mappe[saksstatus='Avsluttet'])),
concat('"Utgår": ', count(descendant::mappe[saksstatus='Utgår'])),
concat('"Under behandling": ', count(descendant::mappe[sakstatus='Underbehandling'])),
concat('Alle møtemapper: ', count(descendant::mappe[@xsi:type='moetemappe'])), 
concat('Avsluttede møtemapper: ', count(descendant::mappe[@xsi:type='moetemappe'][string-length (avsluttetDato/text()) > 0])),
" ")
#STOP#

[XML_QUERY]

job_id=C14
job_enabled=0 
job_name=Antall registreringer pr. arkivdel og type
job_description=N5.16 

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.16 Antall registreringer pr. arkivdel og type", 
concat('Alle: ', count(//registrering)),
concat('Forenklede registreringer: ', count(//registrering[@xsi:type='registrering'])),
concat('Basisregistreringer: ', count(//registrering[@xsi:type='basisregistrering'])),
concat('Journalposter: ', count(//registrering[@xsi:type='journalpost'])),
concat('Møteregistreringer: ', count(//registrering[@xsi:type='moeteregistrering'])), 
" ", 
//arkivdel/(concat("Arkivdel '" , tittel, "': "),
concat('Alle: ', count(descendant::registrering)),
concat('Forenklede registreringer: ', count(descendant::registrering[@xsi:type='registrering'])),
concat('Basisregistreringer: ', count(descendant::registrering[@xsi:type='basisregistrering'])),
concat('Journalposter: ', count(descendant::registrering[@xsi:type='journalpost'])),
concat('Møteregistreringer: ', count(descendant::registrering[@xsi:type='moeteregistrering'])), 
" ")
#STOP#

[XML_QUERY]

job_id=C14.01
job_enabled=0 
job_name=Antall registreringer pr. arkivdel og type (generisk)
job_description=N5.16.01

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.16.01 Antall registreringer pr. arkivdel og type (generisk)", 
concat("Totalt antall registreringer: ", count(//registrering)), 
for $registreringtype in distinct-values(//registrering/@xsi:type)
return
concat($registreringtype, ': ', count(//registrering[@xsi:type=$registreringtype])), 
concat('Registreringer uten spesialisering: ', count(//registrering[count(@*)=3])), 
//arkivdel/(" ",
concat("Arkivdel: '" , tittel),
for $registreringtype in distinct-values(descendant::registrering/@xsi:type)
return
concat($registreringtype, ': ', count(descendant::registrering[@xsi:type=$registreringtype])), 
concat('Registreringer uten spesialisering: ', count(descendant::registrering[count(@*)=3])),
concat('Totalt: ', count(descendant::registrering)))
#STOP#

[XML_QUERY]

job_id=C15
job_enabled=0 
job_name=Antall journalposter pr. arkivdel og type og med/uten hoveddokument
job_description=N5.17 [SAKSARKIV] Gjelder kun saksarkiv (som har registrering element "journalposttype"

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.17 Antall journalposter pr. arkivdel og type og med/uten hoveddokument: ", 
concat('Inngående dokumenter: ', count(//registrering[journalposttype='Inngående dokument'])), 
concat('Utgående dokumenter: ', count(//registrering[journalposttype='Utgående dokument'])), 
concat('Organinterne dokumenter for oppfølging: ', count(//registrering[journalposttype='Organinternt dokument for oppfølging'])), 
concat('Organinterne dokumenter uten oppfølging: ', count(//registrering[journalposttype='Organinternt dokument uten oppfølging'])), 
concat('Saksfremlegg: ', count(//registrering[journalposttype='Saksframlegg'])), 
concat('Journalposter med hoveddokument: ', count(//registrering/dokumentbeskrivelse[tilknyttetRegistreringSom='Hoveddokument'])), 
concat('Journalposter uten hoveddokument: ', count(//registrering[not(dokumentbeskrivelse/tilknyttetRegistreringSom='Hoveddokument')])), 
" ", 
//arkivdel/(concat("Arkivdel '" , tittel, "': "),
concat('Inngående dokumenter: ', count(descendant::registrering[journalposttype='Inngående dokument'])),
concat('Utgående dokumenter: ', count(descendant::registrering[journalposttype='Utgående dokument'])),
concat('Organinterne dokumenter for oppfølging: ', count(descendant::registrering[journalposttype='Organinternt dokument for oppfølging'])), 
concat('Organinterne dokumenter uten oppfølging: ', count(descendant::registrering[journalposttype='Organinternt dokument uten oppfølging'])), 
concat('Saksfremlegg: ', count(descendant::registrering[journalposttype='Saksframlegg'])),
concat('Journalposter med hoveddokument: ', count(descendant::registrering/dokumentbeskrivelse[tilknyttetRegistreringSom='Hoveddokument'])),
concat('Journalposter uten hoveddokument: ', count(descendant::registrering[not(dokumentbeskrivelse/tilknyttetRegistreringSom='Hoveddokument')])), 
" ")
#STOP#

[XML_QUERY]

job_id=C15.01
job_enabled=0 
job_name=Antall journalposter pr. arkivdel og type (generisk)
job_description=N5.17.01 [SAKSARKIV] Gjelder kun saksarkiv (som har registrering element "journalposttype"

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.17.01 Antall journalposter pr. arkivdel og type (generisk): ", 
for $jptype in distinct-values(//registrering/journalposttype)
return
concat($jptype, ': ', count(//registrering[journalposttype=$jptype])), 
//arkivdel/(" ",
concat("Arkivdel: '" , tittel),
for $jptype in distinct-values(descendant::registrering/journalposttype/text())
return
concat($jptype, ': ', count(descendant::registrering[journalposttype/text()=$jptype])) )
#STOP#

[XML_QUERY]

job_id=C16
job_enabled=0 
job_name=Antall registreringer pr. arkivdel og år
job_description=N5.18 [2][Hoppes over av rapportgenerering]

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.18 Antall registreringer pr. akivdel og år: ", 
(" ", 'Totalt: '),
sort(for $v in distinct-values(//registrering/opprettetDato/substring-before(., "-"))
return
(concat($v, ": ", count(index-of(//registrering/opprettetDato/substring-before(., "-"), $v))))),
for $a in //arkivdel
return 
(" ", concat('Arkivdel ' , $a/tittel, ': ') , sort(for $v in distinct-values($a//registrering/opprettetDato/substring-before(., "-"))
return
(concat($v, ": ", count(index-of($a//registrering/opprettetDato/substring-before(., "-"), $v))))))
#STOP#

[XML_QUERY]

job_id=C16.01
job_enabled=0 
job_name=Antall registreringer pr. arkivdel og år, basert på journaldato
job_description=N5.18 [2][Hoppes over av rapportgenerering]

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.18 Antall registreringer pr. akivdel og år: ", 
for $a in //arkivdel
return 
(" ", concat('Arkivdel ' , $a/tittel, ': ') , sort(for $v in distinct-values($a//registrering/journaldato/substring-before(., "-"))
return
(concat($v, ": ", count(index-of($a//registrering/journaldato/substring-before(., "-"), $v))))))
#STOP#

[XML_QUERY]

job_id=C17
job_enabled=0 
job_name=Kontroll mappe kun til klasse uten underklasser
job_description=N5.19 [FAGSYSTEM] Avvik hvis > 0. Gjelder kun fagsysem uten mapper, registrering rett under klasser

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
"N5.19 Kontroll at klasse med registrering ikke også inneholder en underklasse (<0 er avvik): ", 
"[FAGSYSTEM] Gjelder kun fagsysem uten mapper, registrering rett under klasser", 
for $a in //arkivdel
return 
(" ", concat('Arkivdel ' , $a/tittel, ': '),
$a//klasse[klasse]/registrering/concat(../../klasseID, ", ", systemID))
#STOP#

[XML_QUERY]

job_id=C18
job_enabled=0 
job_name=Antall registreringer pr. klasse pr. arkivdel
job_description=N5.20 [3][FAGSYSTEM] Gjelder kun fagsysem uten mapper, registrering rett under klasser, [kjøres separat pga. for lang og mulig personlister]

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
"N5.20 Antall registreringer pr. klasse pr. arkivdel: ",
"[FAGSYSTEM] Gjelder kun fagsysem uten mapper, registrering rett under klasser", 
for $a in //arkivdel
return
(" ", concat('Arkivdel ' , $a/tittel, ': '), 
for $ks in $a/klassifikasjonssystem
return
(" ", $ks/tittel/text()),
$a//klasse[registrering]/concat('Klasse: "', klasseID, ', Tittel: "', tittel,'": ' , 
count(registrering), ', Beskrivelse: ', beskrivelse) )
#STOP#

[XML_QUERY]

job_id=C18.01
job_enabled=0 
job_name=Antall klasser uten innhold pr. arkivdel
job_description=N5.20.01 [3][kjøres separat pga. for lang hvis innhold]

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
"N5.20.01 Antall klasser uten innhold pr. arkivdel: ",
for $a in //arkivdel
return
(" ", concat('Arkivdel ' , $a/tittel, ': '), 
for $ks in $a/klassifikasjonssystem
return
concat($ks/tittel/text(), ": ", 
count($ks//klasse[not (klasse or mappe or registrering)]) ))
#STOP#

[XML_QUERY]

job_id=C19
job_enabled=0 
job_name=Antall registreringer uten dokumentbeskrivelse pr. arkivdel
job_description=N5.21 

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.21 Antall registreringer uten dokumentbeskrivelse pr. arkivdel", 
concat("Alle: ", count(//registrering[not (dokumentbeskrivelse)]/registreringsID)),
" ",
//arkivdel/(concat('Arkivdel "' , tittel, '": ',
count(descendant::registrering[not (dokumentbeskrivelse)]/registreringsID)) )
#STOP#

[XML_QUERY]

job_id=C20
job_enabled=0 
job_name=Antall journalposter pr. arkivdel og status
job_description=N5.22 [SAKSARKIV] Gjelder kun saksarkiv (som journalpost spesialisering av registrering)

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.22 Antall journalposter pr. arkivdel og status: ", 
"[SAKSARKIV] Gjelder kun saksarkiv (som journalpost spesialisering av registrering)", 
concat('Arkivert: ', count(//registrering[journalstatus='Arkivert'])),
concat('Utgår: ', count(//registrering[journalstatus='Utgår'])),
concat('Journalført: ', count(//registrering[journalstatus='Journalført'])),
concat('Ekspedert: ', count(//registrering[journalstatus='Ekspedert'])),
concat('Annen status: ', count(//registrering[not(journalstatus='Arkivert')][not(journalstatus='Journalført')]
	[not(journalstatus='Ekspedert')][not(journalstatus='Utgår')])), 
" ", 
//arkivdel/(concat('Arkivdel "' , tittel, '":'),
concat('Arkivert: ', count(descendant::registrering[journalstatus='Arkivert'])),
concat('Utgår: ', count(descendant::registrering[journalstatus='Utgår'])),
concat('Journalført: ', count(descendant::registrering[journalstatus='Journalført'])),
concat('Ekspedert: ', count(descendant::registrering[journalstatus='Ekspedert'])),
concat('Annen status: ', count(descendant::registrering[not(journalstatus='Arkivert')][not(journalstatus='Journalført')]
[not(journalstatus='Ekspedert')][not(journalstatus='Utgår')])),
" ")
#STOP#

[XML_QUERY]

job_id=C20.01
job_enabled=0 
job_name=Antall journalposter pr. arkivdel og status (generisk)
job_description=N5.22.01 [SAKSARKIV] Gjelder kun saksarkiv (som journalpost spesialisering av registrering)

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
"N5.22.01 Antall journalposter pr. arkivdel og status (generisk)",
for $v in distinct-values(//registrering/journalstatus)
return
concat($v,": ", count(index-of(//registrering/journalstatus, $v))),
concat('Antall registreringer med tom journalstatus: ', count(//journalstatus[not(text())])), 
concat('Antall registreringer uten spesialisering: ', count(descendant::registrering[count(@*)=0])), 
concat('Antall mapper uten spesialisering: ', count(//mappe[count(@*)=0])), 
" ", 
//arkivdel/(concat('Arkivdel "' , tittel, '":'), 
for $v in distinct-values(//registrering/journalstatus)
return
(concat($v,": ", count(index-of(descendant::registrering/journalstatus, $v))),
concat('Antall registreringer med tom journalstatus: ', count(descendant::journalstatus[not(text())])),
concat('Antall registreringer uten spesialisering: ', count(descendant::registrering[count(@*)=0]))), 
concat('Antall mapper uten spesialisering: ', count(descendant::mappe[count(@*)=0])), 
" ")
#STOP#

[XML_QUERY]

job_id=C21
job_enabled=0 
job_name=Antall dokumentbeskrivelser
job_description=N5.23

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.23 Antall dokumentbeskrivelser pr. arkivdel og type",
concat('Alle: ', count(//dokumentbeskrivelse)),
for $format in distinct-values(//tilknyttetRegistreringSom)
return
(concat($format, ": ", count(//tilknyttetRegistreringSom[text() = $format]))), 
" ",
//arkivdel/(concat('Arkivdel "' , tittel, '": '), 
concat('Alle: ', count(descendant::dokumentbeskrivelse)), 
for $format in distinct-values(descendant::tilknyttetRegistreringSom)
return
(concat($format, ": ", count(descendant::tilknyttetRegistreringSom[text() = $format]))), " ")
#STOP#

[XML_QUERY]

job_id=C22
job_enabled=0 
job_name=Antall dokumentbeskrivelser uten dokumentobjekt pr. arkivdel
job_description=N5.24

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.24 Antall dokumentbeskrivelser uten dokumentobjekt pr. arkivdel: ", 
concat("Alle: ", count(//dokumentbeskrivelse[not(dokumentobjekt)])), 
" ", 
//arkivdel/(concat(
"Antall: ", count(descendant::dokumentbeskrivelse[not(dokumentobjekt)]), 
', Arkivdel "' , tittel, '": '))
#STOP#

[XML_QUERY]

job_id=C22.01
job_enabled=0 
job_name=Dokumentbeskrivelser uten dokumentobjekt systemID pr. arkivdel
job_description=N5.24.03 [3][kjøres separat pga. for lang]

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
"N5.24.01 Dokumentbeskrivelser uten dokumentobjekt systemID pr. arkivdel: ", 
for $a in //arkivdel
return
(" ", concat('Arkivdel ' , $a/tittel, ': '), 
$a//dokumentbeskrivelse[not(dokumentobjekt)]/systemID/text()) 
#STOP#

[XML_QUERY]

job_id=C23
job_enabled=0 
job_name=Antall dokumentbeskrivelser pr. arkivdel og status
job_description=N5.25

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.25 Antall dokumentbeskrivelser pr. arkivdel og status: ", 
concat("Alle: ", count(//dokumentbeskrivelse)), 
concat('Dokumentet er ferdigstilt: ', count(//dokumentbeskrivelse[dokumentstatus='Dokumentet er ferdigstilt'])),
concat('Dokumentet er under redigering: ', count(//dokumentbeskrivelse[dokumentstatus='Dokumentet er under redigering'])),
concat('Annen status: ', count(//dokumentbeskrivelse[not(dokumentstatus='Dokumentet er ferdigstilt')][not(dokumentstatus='Dokumentet er under redigering')])), 
" ", 
//arkivdel/(concat('Arkivdel "' , tittel, '": '),
concat("Alle: ", count(descendant::dokumentbeskrivelse)), 
concat('Dokumentet er ferdigstilt: ', count(descendant::dokumentbeskrivelse[dokumentstatus='Dokumentet er ferdigstilt'])),
concat('Dokumentet er under redigering: ', count(descendant::dokumentbeskrivelse[dokumentstatus='Dokumentet er under redigering'])),
concat('Annen status: ', count(descendant::dokumentbeskrivelse[not(dokumentstatus='Dokumentet er ferdigstilt')][not(dokumentstatus='Dokumentet er under redigering')])), " ")
#STOP#

[XML_QUERY]

job_id=C23.01
job_enabled=0 
job_name=Antall dokumentbeskrivelser pr. arkivdel og status (generisk)
job_description=N5.25.01

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.25 Antall dokumentbeskrivelser pr. arkivdel og status (generisk): ", 
concat("Alle: ", count(//dokumentbeskrivelse)), 
for $dokstat in distinct-values(//dokumentbeskrivelse/dokumentstatus)
return
concat($dokstat, ': ', count(//dokumentstatus[text()=$dokstat])), 
//arkivdel/(" ",
concat("Alle: ", count(descendant::dokumentbeskrivelse)), 
concat("Arkivdel: '" , tittel),
for $dokstat in distinct-values(descendant::dokumentbeskrivelse/dokumentstatus)
return
concat($dokstat, ': ', count(descendant::dokumentstatus[text()=$dokstat])) )
#STOP#

[XML_QUERY]

job_id=C24
job_enabled=0 
job_name=Antall dokumentobjekt pr. arkivdel
job_description=N5.26

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.26 Antall dokumentobjekt pr. arkivdel", 
concat('Antall dokumentobjekt: ', count(//dokumentobjekt)), 
" ",
//arkivdel/(concat("Antall: ", count(descendant::dokumentobjekt), ",   Arkivdel '" , tittel ))
#STOP#

[XML_QUERY]

job_id=C24.01
job_enabled=0 
job_name=Antall dokumentobjekt pr. arkivdel og variantformat
job_description=N5.26.01

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.26.01 Antall dokumentobjekt pr. arkivdel og variantformat", 
concat('Antall dokumentobjekt: ', count(//dokumentobjekt)), 
for $format in distinct-values(//variantformat)
return
concat($format, ": ", count(//variantformat[text() = $format])),
" ",
//arkivdel/(concat("Arkivdel " , tittel, ": "),
concat('Antall dokumentobjekt: ', count(descendant::dokumentobjekt)),
for $format in distinct-values(descendant::variantformat)
return
(concat($format, ": ", count(descendant::variantformat[text() = $format]))), " ")
#STOP#

[XML_QUERY]

job_id=C25
job_enabled=0 
job_name=Start- og sluttdato for dokumentene pr. arkivdel
job_description=N5.27

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.27 Start- og sluttdato for dokumentene pr. arkivdel", 
concat("Eldste dokument opprettet: ", min(//dokumentbeskrivelse/opprettetDato/xs:dateTime(.))),
concat("Nyeste dokument opprettet: ", max(//dokumentbeskrivelse/opprettetDato/xs:dateTime(.))), 
" ",
//arkivdel/(concat("Arkivdel '" , tittel ), 
concat("Eldste dokument opprettet: ", min(descendant::dokumentbeskrivelse/opprettetDato/xs:dateTime(.))),
concat("Nyeste dokument opprettet: ", max(descendant::dokumentbeskrivelse/opprettetDato/xs:dateTime(.))), 
" ")
#STOP#

[XML_QUERY]

job_id=F01_v3.1_4.0
job_enabled=0 
job_name=Antall saksparter pr. arkivdel
job_description=N5.35

system=noark5 
subsystem=5.0
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.35_v3.0_v4.0 Antall saksparter pr. arkivdel: ", 
concat("Alle sakspart: ", count(//sakspart)),  
" ", 
//arkivdel/(concat(
'sakspark: ', count(descendant::sakspart), 
',   Arkivdel ' , tittel))
#STOP#

[XML_QUERY]

job_id=F01_v5.0
job_enabled=0 
job_name=Antall parter pr. arkivdel og type tilknyttet
job_description=N5.35_v5.0

system=noark5 
subsystem=5.0
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.35_v5.0 Antall parter pr. arkivdel og type tilknyttet: ", 
concat("Alle part: ", count(//part)), 
concat("Mappe part: ", count(//mappe/part)), 
concat("Registrering part: ", count(//registrering/part)), 
concat("Dokumentbeskrivelse part: ", count(//dokumentbeskrivelse/part)), 
" ", 
//arkivdel/(concat('Arkivdel ' , tittel), 
concat("Alle part: ", count(descendant::part)), 
concat("Mappe part: ", count(descendant::mappe/part)), 
concat("Registrering part: ", count(descendant::registrering/part)), 
concat("Dokumentbeskrivelse part: ", count(descendant::dokumentbeskrivelse/part)),
" " )
#STOP#

[XML_QUERY]

job_id=F02
job_enabled=0 
job_name=Antall merknader pr. arkivdel og type tilknyttet
job_description=N5.36

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.36 Antall merknader pr. arkivdel og type tilknyttet: ", 
concat('Alle: ', count(//merknad)), 
concat('Mapper: ', count(//mappe/merknad)), 
concat('Registreringer: ', count(//registrering/merknad)), 
concat('Dokumenter: ', count(//dokumentbeskrivelse/merknad)), 
" ", 
//arkivdel/(concat('Arkivdel "' , tittel, '": '), 
concat('Alle: ', count(descendant::merknad)), 
concat('Mapper: ', count(descendant::mappe/merknad)), 
concat('Registreringer: ', count(descendant::registrering/merknad)), 
concat('Dokumenter: ', count(descendant::dokumentbeskrivelse/merknad)), 
" ")
#STOP#

[XML_QUERY]

job_id=F03
job_enabled=0 
job_name=Antall kryssreferanser pr. arkivdel og type tilknyttet
job_description=N5.37

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.37 Antall kryssreferanser pr. arkivdel og type tilknyttet: ", 
concat('Alle: ', count(//kryssreferanse/*)), 
concat('Klasser: ', count(//klasse/kryssreferanse/*)), 
concat('Mapper: ', count(//mappe/kryssreferanse/*)), 
concat('Registreringer: ', count(//registrering/kryssreferanse/*)), 
" ", 
//arkivdel/(concat('Arkivdel "' , tittel, '": '),
concat('Alle: ', count(descendant::kryssreferanse/*)), 
concat('Klasser: ', count(descendant::klasse/kryssreferanse/*)), 
concat('Mapper: ', count(descendant::mappe/kryssreferanse/*)), 
concat('Registreringer: ', count(descendant::registrering/kryssreferanse/*)),
" ") 
#STOP#

[XML_QUERY]

job_id=F04
job_enabled=0 
job_name=Antall presedenser pr. arkivdel og type tilknyttet
job_description=N5.38

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.38 Antall presedenser pr. arkivdel og type tilknyttet: ", 
concat('Alle: ', count(//presedens)), 
concat('Mapper: ', count(//mappe/presedens)), 
concat('Journalposter: ', count(//registrering[@xsi:type='journalpost']/presedens)), 
" ", 
//arkivdel/(concat('Arkivdel "' , tittel, '": '),
concat('Alle: ', count(descendant::presedens)), 
concat('Mapper: ', count(descendant::mappe/presedens)), 
concat('Journalposter: ', count(descendant::registrering[@xsi:type='journalpost']/presedens)),
" ")
#STOP#

[XML_QUERY]

job_id=F05
job_enabled=0 
job_name=Antall korrespondanseparter pr. arkivdel
job_description=N5.39

system=noark5 
subsystem=5.0
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.39 Antall korrespondanseparter pr. arkivdel: ", 
concat("Antall: ", count(//korrespondansepart)), 
for $partparent in distinct-values(//korrespondansepart/../name())
return
concat($partparent, ": ", count(//*[name() = $partparent]//korrespondansepart)), 
" ", 
//arkivdel/(concat('Arkivdel ' , tittel), 
concat("Antall: ", count(descendant::korrespondansepart)), 
for $partparent in distinct-values(//korrespondansepart/../name())
return
concat($partparent, ": ", count(descendant::*[name() = $partparent]//descendant::korrespondansepart)),
" " )
#STOP#

[XML_QUERY]

job_id=F06
job_enabled=0 
job_name=Antall avskrivninger pr. arkivdel
job_description=N5.40

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.40 Antall avskrivninger pr. arkivdel: ", 
concat('Alle avskrevne journalposter: ', count(//registrering[@xsi:type='journalpost']/avskrivning[string-length(avskrivningsmaate)>0]/avskrivningsmaate)), 
concat('Avskrevet av andre journalposter: ', count(//registrering[@xsi:type='journalpost']/avskrivning[string-length(referanseAvskrivesAvJournalpost)>0]/referanseAvskrivesAvJournalpost)),
" ", 
//arkivdel/(concat('Arkivdel "' , tittel, '": '),
concat('Alle avskrevne journalposter: ', count(descendant::registrering[@xsi:type='journalpost']/avskrivning[string-length(avskrivningsmaate)>0]/avskrivningsmaate)), 
concat('Avskrevet av andre journalposter: ', count(descendant::registrering[@xsi:type='journalpost']/avskrivning[string-length(referanseAvskrivesAvJournalpost)>0]/referanseAvskrivesAvJournalpost)),
" ")
#STOP#

[XML_QUERY]

job_id=F06.01
job_enabled=0 
job_name=Antall avskrivninger pr. arkivdel (faste verdier)
job_description=N5.40.01

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.40.01 Antall avskrivninger pr. arkivdel (faste verdier): ",
concat("Alle avskrivninger: ", count(//avskrivningsmaate)), 
concat("Besvart med brev: ", count(//avskrivningsmaate[text()="Besvart med brev"])), 
concat("Besvart med e-post: ", count(//avskrivningsmaate[text()="Besvart med e-post"])), 
concat("Besvart på telefon: ", count(//avskrivningsmaate[text()="Besvart på telefon"])), 
concat("Tatt til etterretning: ", count(//avskrivningsmaate[text()="Tatt til etterretning"])), 
concat("Tatt til orientering: ", count(//avskrivningsmaate[text()="Tatt til orientering"])), 
concat("Besvart med notat: ", count(//avskrivningsmaate[text()="Besvart med notat"])), 
concat("Saken ble avsluttet: ", count(//avskrivningsmaate[text()="Saken ble avsluttet"])), 
" ",
//arkivdel/(concat("Arkivdel " , tittel, ": "),
concat('Alle avskrivninger: ', count(descendant::avskrivning)),
concat("Besvart med brev: ", count(descendant::avskrivningsmaate[text()="Besvart med brev"])), 
concat("Besvart med e-post: ", count(descendant::avskrivningsmaate[text()="Besvart med e-post"])), 
concat("Besvart på telefon: ", count(descendant::avskrivningsmaate[text()="Besvart på telefon"])), 
concat("Tatt til etterretning: ", count(descendant::avskrivningsmaate[text()="Tatt til etterretning"])), 
concat("Tatt til orientering: ", count(descendant::avskrivningsmaate[text()="Tatt til orientering"])), 
concat("Besvart med notat: ", count(descendant::avskrivningsmaate[text()="Besvart med notat"])), 
concat("Saken ble avsluttet: ", count(descendant::avskrivningsmaate[text()="Saken ble avsluttet"])), 
" ")
#STOP#

[XML_QUERY]

job_id=F06.02
job_enabled=0 
job_name=Antall avskrivninger pr. arkivdel (generisk)
job_description=N5.40.02

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.40.02 Antall avskrivninger pr. arkivdel (generisk): ", 
concat("Alle avskrivninger: ", count(//avskrivningsmaate)), 
for $format in distinct-values(//avskrivningsmaate)
return
concat($format, ": ", count(//avskrivningsmaate[text() = $format])), 
" ",
//arkivdel/(concat("Arkivdel " , tittel, ": "),
concat('Avskrivninger: ', count(descendant::avskrivning)),
for $format in distinct-values(descendant::avskrivningsmaate)
return
(concat($format, ": ", count(descendant::avskrivningsmaate[text() = $format]))), " ")
#STOP#

[XML_QUERY]

job_id=F07
job_enabled=0 
job_name=Antall dokumentflyter pr. arkivdel
job_description=N5.41

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.41 Antall dokumentflyter pr. arkivdel: ", 
concat('Alle: ', count(//registrering/dokumentflyt)), 
concat('Journalposter: ', count(//registrering[@xsi:type='journalpost'][dokumentflyt])), 
concat('Arkivnotater: ', count(//registrering[@xsi:type='arkivnotat']/dokumentflyt)), 
" ", 
//arkivdel/(concat('Arkivdel "' , tittel, '": '), 
concat('Alle: ', count(descendant::registrering/dokumentflyt)), 
concat('Journalposter: ', count(descendant::registrering[@xsi:type='journalpost'][dokumentflyt])), 
concat('Arkivnotater: ', count(descendant::registrering[@xsi:type='arkivnotat']/dokumentflyt)), 
" ")
#STOP#

[XML_QUERY]

job_id=F07.01
job_enabled=1 
job_name=Antall dokumentflyter pr. arkivdel (generisk)
job_description=N5.41

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.41 Antall dokumentflyter pr. arkivdel (generisk): ", 
concat('Alle: ', count(//registrering/dokumentflyt)), 
concat('Journalposter: ', count(//registrering[@xsi:type='journalpost'][dokumentflyt])), 
concat('Arkivnotater: ', count(//registrering[@xsi:type='arkivnotat']/dokumentflyt)), 
" ", 
//arkivdel/(concat('Arkivdel "' , tittel, '": '), 
concat('Alle: ', count(descendant::registrering/dokumentflyt)),
for $regType in distinct-values(//registrering/@xsi:type)
return
concat($regType, ': ', count(descendant::registrering[@xsi:type=$regType][dokumentflyt])), 
" ")
#STOP#

[XML_QUERY]

job_id=F08
job_enabled=0 
job_name=Antall skjerminger pr. arkivdel
job_description=N5.42

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.42 Antall skjerminger pr. arkivdel: ", 
concat('Alle: ', count(//skjerming)), 
concat('Arkivdel: ', count(//arkivdel/skjerming)), 
concat('Klasser: ', count(//klasse/skjerming)), 
concat('Mapper: ', count(//mappe/skjerming)), 
concat('Registreringer: ', count(//registrering/skjerming)), 
concat('Dokumentbeskrivelse: ', count(//dokumentbeskrivelse/skjerming)), 
" ", 
//arkivdel/(concat('Arkivdel "' , tittel, '":'), 
concat('Alle: ', count(descendant::skjerming)), 
concat('Arkivdel: ', count(/skjerming)), 
concat('Klasser: ', count(descendant::klasse/skjerming)), 
concat('Mapper: ', count(descendant::mappe/skjerming)), 
concat('Registreringer: ', count(descendant::registrering/skjerming)), 
concat('Dokumentbeskrivelse: ', count(descendant::dokumentbeskrivelse/skjerming)), 
" ") 
#STOP#

[XML_QUERY]

job_id=F09
job_enabled=0 
job_name=Antall graderinger pr. arkivdel
job_description=N5.43

system=noark5 
subsystem=v3.1_v4.0
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.43_v3.1_v4.0 Antall graderinger pr. arkivdel: ", 
concat('Alle: ', count(//gradering)), 
concat('Arkivdel: ', count(//arkivdel/gradering)), 
concat('Klasse: ', count(//klasse/gradering)), 
concat('Mappe: ', count(//mappe/gradering)), 
concat('Registrering: ', count(//registrering/gradering)), 
concat('Dokumentbeskrivelse: ', count(//dokumentbeskrivelse/gradering)), 
" ", 
//arkivdel/(concat('Arkivdel "' , tittel, '": '),
concat('Alle: ', count(descendant::gradering)), 
concat('Arkivdel: ', count(/gradering)), 
concat('Klasse: ', count(descendant::klasse/gradering)), 
concat('Mappe: ', count(descendant::mappe/gradering)), 
concat('Registrering: ', count(descendant::registrering/gradering)), 
concat('Dokumentbeskrivelse: ', count(descendant::dokumentbeskrivelse/gradering)), 
" ")
#STOP#

[XML_QUERY]

job_id=F09.01
job_enabled=0 
job_name=Antall graderinger pr. arkivdel
job_description=N5.43.01

system=noark5 
subsystem=v5.0
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.43.01_v5.0 Antall graderinger pr. arkivdel: ", 
concat('Alle: ', count(//grad)), 
concat('Arkivdel: ', count(//arkivdel/grad)), 
concat('Klasse: ', count(//klasse/grad)), 
concat('Mappe: ', count(//mappe/grad)), 
concat('Registrering: ', count(//registrering/grad)), 
concat('Dokumentbeskrivelse: ', count(//dokumentbeskrivelse/grad)), 
" ", 
//arkivdel/(concat('Arkivdel "' , tittel, '": '),
concat('Alle: ', count(descendant::grad)), 
concat('Arkivdel: ', count(/grad)), 
concat('Klasse: ', count(descendant::klasse/grad)), 
concat('Mappe: ', count(descendant::mappe/grad)), 
concat('Registrering: ', count(descendant::registrering/grad)), 
concat('Dokumentbeskrivelse: ', count(descendant::dokumentbeskrivelse/grad)), 
" ")
#STOP#

[XML_QUERY]

job_id=F10
job_enabled=0 
job_name=Antall kassasjonsvedtak pr. arkivdel
job_description=N5.44

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.44 Antall kassasjonsvedtak pr. arkivdel: ", 
concat('Alle: ', count(//kassasjon)), 
concat('Arkivdel: ', count(//arkivdel/kassasjon)), 
concat('Klasse: ', count(//klasse/kassasjon)), 
concat('Mappe: ', count(//mappe/kassasjon)), 
concat('Registrering: ', count(//registrering/kassasjon)), 
concat('Dokumentbeskrivelse: ', count(//dokumentbeskrivelse/kassasjon)), 
" ", 
//arkivdel/(concat('Arkivdel "' , tittel, '": '), 
concat('Alle: ', count(descendant::kassasjon)), 
concat('Arkivdel: ', count(/kassasjon)), 
concat('Klasse: ', count(descendant::klasse/kassasjon)), 
concat('Mappe: ', count(descendant::mappe/kassasjon)), 
concat('Registrering: ', count(descendant::registrering/kassasjon)), 
concat('Dokumentbeskrivelse: ', count(descendant::dokumentbeskrivelse/kassasjon)), 
" ")
#STOP#

[XML_QUERY]

job_id=F11
job_enabled=0 
job_name=Antall kassasjoner pr. arkivdel
job_description=N5.45

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.45 Antall kassasjoner pr. arkivdel: ", 
concat('Alle utførte kassasjoner: ', count(//dokumentbeskrivelse/utfoertKassasjon)), 
" ", 
//arkivdel/(concat(
'Kassasjoner: ', count(descendant::dokumentbeskrivelse/utfoertKassasjon), 
',   ' , tittel)) 
#STOP#

[XML_QUERY]

job_id=F12
job_enabled=0 
job_name=Antall konverterte dokumenter pr. arkivdel
job_description=N5.46

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.46 Antall konverterte dokumenter pr. arkivdel: ", 
concat('Alle: ', count(descendant::konvertering)), 
" ", 
//arkivdel/(concat(
'Konverterte dok: ', count(descendant::konvertering), 
',   ' , tittel)) 
#STOP#

[XML_QUERY]

job_id=F13
job_enabled=0 
job_name=Antall utførte slettinger utenom kassasjon pr. arkivdel
job_description=

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
"Antall utførte slettinger utenom kassasjon pr. arkivdel: ", " ", 
concat('Alle slettede dok: ', count(//sletting)), 
//arkivdel/(concat(
'Slettede dok: ', count(descendant::sletting), 
',   ' , tittel)) 
#STOP#

[XML_QUERY]

job_id=H01
job_enabled=0 
job_name=Antall journalposter i løpende journal
job_description=N5.52

system=noark5 
subsystem=
source=loependeJournal.xml 
target=noark5_analyse_{dt}.log

#START#
concat('N5.52 Antall journalregistreringer i loependeJournal: ', count(//journalregistrering))
#STOP#

[XML_QUERY]

job_id=H02
job_enabled=0 
job_name=Antall journalposter per år i løpende journal
job_description=N5.53 [2][Hoppes over av rapportgenerering]

system=noark5 
subsystem=
source=loependeJournal.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.53 Antall journalposter per år i løpende journal: ", 
sort(for $v in distinct-values(//journalregistrering/journalpost/journaldato/substring-before(., "-"))
return
(concat($v,": ", count(index-of(//journalregistrering/journalpost/journaldato/substring-before(., "-"), $v)))))
#STOP#

[XML_QUERY]

job_id=H03
job_enabled=0 
job_name=Start- og sluttdato for journalpostene i løpende journal
job_description=N5.54 [SAKSARKIV] Gjelder kun saksarkiv (som har registrering element "journalposttype"

system=noark5 
subsystem=
source=loependeJournal.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.54 Start- og sluttdato for journalpostene i løpende journal: ", 
concat('Startdato: ', min(//journalregistrering/journalpost/journaldato/xs:date(.))), 
concat('Sluttdato: ', max(//journalregistrering/journalpost/journaldato/xs:date(.)))
#STOP#

[XML_QUERY]

job_id=H04
job_enabled=0 
job_name=Antall skjermede journalposter i løpende journal
job_description=N5.55

system=noark5 
subsystem=
source=loependeJournal.xml 
target=noark5_analyse_{dt}.log

#START#
concat('N5.55 Antall skjermede journalposter i løpendeJournal: ', count(//journalregistrering[journalpost[tilgangsrestriksjon]]))
#STOP#

[XML_QUERY]

job_id=H05
job_enabled=0 
job_name=Antall journalposter i offentlig journal
job_description=N5.56

system=noark5 
subsystem=
source=offentligJournal.xml 
target=noark5_analyse_{dt}.log

#START#
concat('N5.56 Antall journalregistreringer i offentligJournal: ', count(//journalregistrering))
#STOP#

[XML_QUERY]

job_id=H06
job_enabled=0 
job_name=Antall journalposter per år i offentlig journal
job_description=N5.57 [2][Hoppes over av rapportgenerering]

system=noark5 
subsystem=
source=offentligJournal.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.57 Antall journalposter per år i offentlig journal: ", " ", 
sort(for $v in distinct-values(//journalregistrering/journalpost/journaldato/substring-before(., "-"))
return
concat($v,": ", count(index-of(//journalregistrering/journalpost/journaldato/substring-before(., "-"), $v))))
#STOP#

[XML_QUERY]

job_id=H07
job_enabled=0 
job_name=Start- og sluttdato for journalpostene i offentlig journal
job_description=N5.58 [SAKSARKIV] Gjelder kun saksarkiv (som har registrering element "journalposttype"

system=noark5 
subsystem=
source=offentligJournal.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.58 Start- og sluttdato for journalpostene i offentlig journal: ", 
concat('Startdato: ', min(//journalregistrering/journalpost/journaldato/xs:date(.))), 
concat('Sluttdato: ', max(//journalregistrering/journalpost/journaldato/xs:date(.)))
#STOP#

[XML_QUERY]

job_id=I01
job_enabled=0 
job_name=Antall journalposter i arkivuttrekket
job_description=N5.59

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('N5.59 Antall journalposter i arkivstruktur.xml: ' , count(//registrering[@xsi:type='journalpost']))
#STOP#

[XML_QUERY]

job_id=I01.01
job_enabled=0 
job_name=Antall journalposter i løpende journal
job_description=N5.59.01

system=noark5 
subsystem=
source=loependeJournal.xml 
target=noark5_analyse_{dt}.log

#START#
concat('N5.59.01 Antall journalposter i loependeJourmal.xml: ', count(//journalregistrering/journalpost))
#STOP#

[XML_QUERY]

job_id=I01.02
job_enabled=0 
job_name=Antall journalposter i offentlig journal
job_description=N5.59.02

system=noark5 
subsystem=
source=offentligJournal.xml 
target=noark5_analyse_{dt}.log

#START#
concat('N5.59.02 Antall journalposter i offentligJourmal.xml: ' , count(//journalregistrering/journalpost))
#STOP#

[XML_QUERY]

job_id=I02
job_enabled=0 
job_name=Start- og sluttdato journalposter i arkivuttrekket versus løpende og offentlig journal
job_description=N5.60 [SAKSARKIV] Gjelder kun saksarkiv (som har registrering element "journalposttype"). Henter kun fra arkivstruktur.xml, resten må hentes fra H3 og H7.

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
'N5.60 Start- og sluttdato journalposter i arkivuttrekket', 
concat('Startdato: ', min(//registrering[@xsi:type='journalpost']/
opprettetDato/xs:dateTime(.))), 
concat('Sluttdato: ', max(//registrering[@xsi:type='journalpost']/
opprettetDato/xs:dateTime(.))) 
#STOP#

[XML_QUERY]

job_id=J01
job_enabled=0 
job_name=Antall endringer i endringslogg
job_description=N5.61

system=noark5 
subsystem=
source=endringslogg.xml 
target=noark5_analyse_{dt}.log

#START#
concat('N5.61 Antall endringer i endringslogg: ', count(//endring)),
concat('Første endring: ', min(//endring/endretDato/xs:dateTime(.))),
concat('Siste endring: ', max(//endring/endretDato/xs:dateTime(.)))
#STOP#

[SQL_QUERY]

job_id=J02
job_enabled=0 
job_name=Kontroll referanser i endringslogg
job_description=N5.62 [DRAFT] Spørring må lages!

system=noark5 
subsystem=
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

server=127.0.0.1 
database=t01noark5a1 
user=t01noark5a1u 
psw=test

#START# 
"N5.62 Kontroll referanser i endringslogg"
#STOP#

[XML_QUERY]

job_id=L01
job_enabled=0 
job_name=Skjema for virksomhetsspesifikke metadata i arkivuttrekk.xml
job_description=N5.64 [DRAFT] Spørring må lages!

system=noark5 
subsystem=
source=arkivuttrekk.xml 
target=noark5_analyse_{dt}.log

#START#
"N5.64 Skjema for virksomhetsspesifikke metadata i arkivuttrekk.xml"
#STOP#

[XML_QUERY]

job_id=L02
job_enabled=0 
job_name=Antall virksomhetsspesifikke metadata pr. element pr. arkivdel
job_description=N5.65_v3.1_v4.0

system=noark5 
subsystem=3.1,4.0
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
"N5.65_v3.1_v4.0 Antall virksomhetsspesifikke metadata pr. arkivdel pr. type: ", 
//arkivdel/(" ",
concat("Arkivdel '" , tittel, "': "),
concat('Mappe: ', count(descendant::mappe/virksomhetsspesifikkeMetadata)), 
concat('Sakspart: ', count(descendant::sakspart/virksomhetsspesifikkeMetadata)), 
concat('basisregistrering: ', count(descendant::basisregistrering/virksomhetsspesifikkeMetadata)), 
concat('Totalt: ', count(descendant::virksomhetsspesifikkeMetadata)))
#STOP#

[XML_QUERY]

job_id=L02.01
job_enabled=0 
job_name=Antall virksomhetsspesifikke metadata pr. element pr. arkivdel
job_description=N5.65_v3.1_v4.0

system=noark5 
subsystem=5.0
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
"N5.65_v5.0 Antall virksomhetsspesifikke metadata pr. arkivdel pr. type: ", 
//arkivdel/(" ",
concat("Arkivdel '" , tittel, "': "),
concat('Mappe: ', count(descendant::mappe/virksomhetsspesifikkeMetadata)), 
concat('Part: ', count(descendant::part/virksomhetsspesifikkeMetadata)), 
concat('registrering: ', count(descendant::registrering/virksomhetsspesifikkeMetadata)), 
concat('Totalt: ', count(descendant::virksomhetsspesifikkeMetadata)))
#STOP#
