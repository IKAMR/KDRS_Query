[XML_QUERY]

job_id=5.a.1-1
job_enabled=1 
job_name=Arkiv_info
job_description=

system=noark5 
subsystem= 
source= arkivstruktur.xml
target=noark5_analyse_{dt}.log

#START#
//arkiv/concat(tittel/text(), ", ID: ", systemID/text(), 
", Start: ", opprettetDato/text(), ", Slutt: ", opprettetDato/text(), 
", Opprettet av: ", opprettetAv/text(), ", Avsluttet av: ", avsluttetAv/text() )
#STOP#

[XML_QUERY]

job_id=5.a.1-2
job_enabled=1 
job_name=Arkivskaper_info
job_description=

system=noark5 
subsystem= 
source= arkivstruktur.xml
target=noark5_analyse_{dt}.log

#START#
for $v in //arkivskaper
return
(concat("Arkivskaper ID: ", $v/arkivskaperID, ": ", $v/arkivskaperNavn, " | ", $v/beskrivelse))
#STOP#

[XML_QUERY]

job_id=5.a.1-3
job_enabled=1 
job_name=Arkivdeler_info
job_description=

system=noark5 
subsystem= 
source= arkivstruktur.xml
target=noark5_analyse_{dt}.log

#START#
concat( "Arkivstrukturen inneholder ", count(//arkivdel), " arkivdeler:"), 
//arkivdel/concat(tittel/text(), ", ID: ", systemID/text(), 
", StartPer: ", arkivperiodeStartDato/text(), ", SluttPer: ", arkivperiodeSluttDato/text(), 
", Opprettet: ", opprettetDato/text(), ", Avsluttet: ", avsluttetDato/text()
, ", Dokumentmedium: ", dokumentmedium/text() )
#STOP#

[XML_QUERY]

job_id=5.a.1-4
job_enabled=1 
job_name=Arkivdeler_info_2
job_description= Klasser, Mapper, Registreringer

system=noark5 
subsystem= 
source= arkivstruktur.xml
target=noark5_analyse_{dt}.log

#START#
for $arkivdel in //arkivdel
return 
concat($arkivdel/systemID, ", ", $arkivdel/tittel, " (", 
count($arkivdel/descendant::klasse), " klasser, ", 
count($arkivdel/descendant::mappe), " mapper, ", 
count($arkivdel/descendant::registrering), " registreringer)")
#STOP#

[XML_QUERY]

job_id=5.a.2-1
job_enabled=1 
job_name=Antall_registreringer
job_description= 

system=noark5 
subsystem= 
source= arkivstruktur.xml
target=noark5_analyse_{dt}.log

#START#
count(//registrering)
#STOP#

[XML_QUERY]

job_id=5.a.2-2
job_enabled=1 
job_name=Antall_registreringer_pr_aar
job_description= Antall registreringer pr. år

system=noark5 
subsystem= 
source= arkivstruktur.xml
target=noark5_analyse_{dt}.log

#START#
for $v in distinct-values(//registrering/opprettetDato/substring-before(., "-"))
return
(concat($v,": ", count(index-of(//registrering/opprettetDato/substring-before(., "-"), $v))))
#STOP#

[XML_QUERY]

job_id=5.a.2-3
job_enabled=1 
job_name=Antall_reg_journalp
job_description= Antall registreringer type 'journalpost'

system=noark5 
subsystem= 
source= arkivstruktur.xml
target=noark5_analyse_{dt}.log

#START#
count(//registrering[@xsi:type='journalpost'])
#STOP#

[XML_QUERY]

job_id=5.a.2-4
job_enabled=1 
job_name=Antall_reg_journalp_pr_aar
job_description= Antall registreringer pr. år type 'journalpost', kategorisert pr. år

system=noark5 
subsystem= 
source= arkivstruktur.xml
target=noark5_analyse_{dt}.log

#START#
for $v in distinct-values(//registrering[@xsi:type='journalpost']/opprettetDato/substring-before(., "-"))
return
(concat($v,": ", count(index-of(//registrering[@xsi:type='journalpost']/opprettetDato/substring-before(., "-"), $v))))
#STOP#

[XML_QUERY]

job_id=5.a.2-5
job_enabled=1 
job_name=Antall_reg_not_journalp
job_description= Antall registreringer type annet enn 'journalpost'

system=noark5 
subsystem= 
source= arkivstruktur.xml
target=noark5_analyse_{dt}.log

#START#
count(//registrering[@xsi:type!='journalpost'])
#STOP#

[XML_QUERY]

job_id=5.a.3-1
job_enabled=1 
job_name=Klassifikasjonssystemer
job_description=

system=noark5 
subsystem= 
source= arkivstruktur.xml
target=noark5_analyse_{dt}.log

#START#
"Klassifikasjonssystemer: ",
//klassifikasjonssystem/(
concat("systemID (1): ", systemID),
concat("klassifikasjonstype (0-1): ", //klassifikasjonssystem/klassifikasjonstype),
concat("tittel (1): ", //klassifikasjonssystem/tittel),
concat("beskrivelse (0-1): ", //klassifikasjonssystem/beskrivelse),
concat("opprettetDato (1): ", //klassifikasjonssystem/opprettetDato),
concat("opprettetAv (1): ", //klassifikasjonssystem/opprettetAv),
concat("avsluttetDato (0-1): ", //klassifikasjonssystem/avsluttetDato),
concat("avsluttetAv (0-1): ", //klassifikasjonssystem/avsluttetAv))
#STOP#

[XML_QUERY]

job_id=5.a.3-2
job_enabled=1 
job_name=Ant_klasser
job_description=

system=noark5 
subsystem= 
source= arkivstruktur.xml
target=noark5_analyse_{dt}.log

#START#
//klassifikasjonssystem/(concat("Klasser ", count(descendant::klasse)), 
concat("Klasser nivå 1: ", count(descendant::klasse) - count(descendant::klasse/klasse)), 
concat("Klasser nivå 2: ", count(descendant::klasse/klasse) - count(descendant::klasse/klasse/klasse)), 
concat("Klasser nivå 3: ", count(descendant::klasse/klasse/klasse) - count(descendant::klasse/klasse/klasse/klasse)), 
concat("Klasser nivå 4: ", count(descendant::klasse/klasse/klasse/klasse)))
#STOP#

[XML_QUERY]

job_id=5.a.3-3
job_enabled=1 
job_name=Ant_klasser_pr_aar
job_description= Klasse opprettetDato pr. år

system=noark5 
subsystem= 
source= arkivstruktur.xml
target=noark5_analyse_{dt}.log

#START#
for $v in distinct-values(//klasse/opprettetDato/substring-before(., "-"))
return
(concat($v,": ", count(index-of(//klasse/opprettetDato/substring-before(., "-"), $v))))
#STOP#

[XML_QUERY]

job_id=5.a.3-4
job_enabled=1 
job_name=Ant_klasser_opprettetDato
job_description= Klasse opprettetDato

system=noark5 
subsystem= 
source= arkivstruktur.xml
target=noark5_analyse_{dt}.log

#START#
for $v in distinct-values(//klasse/opprettetDato)
return
(concat($v,": ", count(index-of(//klasse/opprettetDato, $v))))
#STOP#

[XML_QUERY]

job_id=5.a.3-5
job_enabled=1 
job_name=Ant_klasser_opprettetAv
job_description= Klasse opprettetAv

system=noark5 
subsystem= 
source= arkivstruktur.xml
target=noark5_analyse_{dt}.log

#START#
for $v in distinct-values(//klasse/opprettetAv)
return
(concat($v,": ", count(index-of(//klasse/opprettetAv, $v))))
#STOP#

[XML_QUERY]

job_id=5.a.3-6
job_enabled=1 
job_name=Ant_klasser_avsl_pr_aar
job_description= Klasse avsluttetDato pr. år

system=noark5 
subsystem= 
source= arkivstruktur.xml
target=noark5_analyse_{dt}.log

#START#
for $v in distinct-values(//klasse/avsluttetDato/substring-before(., "-"))
return
(concat($v,": ", count(index-of(//klasse/avsluttetDato/substring-before(., "-"), $v))))
#STOP#

[XML_QUERY]

job_id=5.a.3-7
job_enabled=1 
job_name=Ant_klasser_avsl_dato
job_description= Klasse avsluttetDato

system=noark5 
subsystem= 
source= arkivstruktur.xml
target=noark5_analyse_{dt}.log

#START#
for $v in distinct-values(//klasse/avsluttetDato)
return
(concat($v,": ", count(index-of(//klasse/avsluttetDato, $v))))
#STOP#

[XML_QUERY]

job_id=5.a.3-8
job_enabled=1 
job_name=klasser_avsl_av
job_description= Klasse avsluttetAv

system=noark5 
subsystem= 
source= arkivstruktur.xml
target=noark5_analyse_{dt}.log

#START#
for $v in distinct-values(//klasse/avsluttetAv)
return
(concat($v,": ", count(index-of(//klasse/avsluttetAv, $v))))
#STOP#

[XML_QUERY]

job_id=5.a.4-1
job_enabled=1 
job_name=Ant_mapper
job_description=

system=noark5 
subsystem= 
source= arkivstruktur.xml
target=noark5_analyse_{dt}.log

#START#

#STOP#