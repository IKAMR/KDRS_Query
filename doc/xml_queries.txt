[XML_QUERY]

job_id=C01 
job_enabled=1 
job_name=Analyse_count_archives- Antall arkiv
job_description=

system=noark5 
subsystem= 
source= arkivstruktur.xml
target=noark5_analyse_{dt}.log

#START#
concat('Antall arkiv: ', count(//a:arkiv))
#STOP#

[XML_QUERY]

job_id=C02
job_enabled=1 
job_name=Antall arkivdel 
job_description=

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
concat('Antall arkivdeler: ', count(//a:arkivdel))
#STOP#

[XML_QUERY]

job_id=C04
job_enabled=1 
job_name=Arkivdelen(e)s status i arkivstrukturen
job_description=

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
concat('Arkivdel "' , a:tittel , '": "', descendant::a:arkivdelstatus, '"')
#STOP#

[XML_QUERY]

job_id=C05
job_enabled=1 
job_name=Antall klassifikasjonssystemer i arkivstrukturen
job_description=

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
concat('Arkivdel "', descendant::a:tittel, '": ', count(descendant::a:klassifikasjonssystem))
#STOP#

[XML_QUERY]

job_id=C06
job_enabled=1 
job_name=Antall klasser i arkivstrukturen
job_description=

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
concat('Arkivdel "' , a:tittel, '": ', count(descendant::a:klasse), '\r\n' ,
		'level 1: ', count(descendant::a:klasse) - count(descendant::a:klasse/a:klasse), '\r\n' ,
		'level 2: ', count(descendant::a:klasse/a:klasse) - count(descendant::a:klasse/a:klasse/a:klasse), '\r\n',
		'level 3: ', count(descendant::a:klasse/a:klasse/a:klasse))
#STOP#

[XML_QUERY]

job_id=C07
job_enabled=1 
job_name=Antall klasser uten underklasser, mapper eller registreringer i det primære klassifikasjonssystemet i arkivstrukturen
job_description=

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
concat('"', descendant::a:klassifikasjonssystem/a:systemID, '": ', count(descendant::a:klasse[not (a:klasse or a:mappe or a:registrering)]))
#STOP#

[XML_QUERY]

job_id=C08
job_enabled=1 
job_name= Antall mapper i arkivstrukturen
job_description=

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
concat('Arkivdel "' , a:tittel, '": ', '\r\n', 
	'Antall saksmapper: ', count(descendant::a:mappe[@xsi:type='saksmappe']),'\r\n', 
	'Antall møtemapper: ', count(descendant::a:mappe[@xsi:type='moetemappe']), '\r\n',
    'Antall mapper uten spesialisering: ', count(descendant::a:mappe[count(@*)=0]), '\r\n',
	'Totalt: ', count(descendant::a:mappe))
#STOP#

[XML_QUERY]

job_id=C10
job_enabled=1 
job_name= Antall klasser med både mapper og underklasser
job_description=

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
concat('Arkivdel "' , a:tittel , '": ', count(descendant::a:klasse[a:klasse]/a:mappe))
#STOP#

[XML_QUERY]

job_id=C11
job_enabled=1 
job_name= Antall mapper i hver klasse
job_description=Antall mapper som er klassifisert med hver enkelt klasse i arkivstrukturen

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START# 
concat('Klasse "', //a:klasse[a:mappe]/a:klasseID, '": ' , count(//a:klasse[a:mappe]/a:mappe))
#STOP#

[XML_QUERY]

job_id=C12
job_enabled=1 
job_name= Antall mapper uten undermapper eller registreringer
job_description= Antall mapper uten undermapper eller registreringer i arkivstrukturen

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Arkivdel "' , a:tittel , '": ', '\r\n', 
	'Antall mapper uten registreringer: ', count(descendant::a:mappe[not (a:mappe or a:registrering)]))
#STOP#

[XML_QUERY]

job_id=C13
job_enabled=1 
job_name= Mappenes status i arkivstrukturen
job_description= Mappenes status i arkivstrukturen

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Arkivdel "' , a:tittel , '":', '\r\n',
	'Antall mapper med status "Under behandling": ', count(descendant::a:mappe[a:sakstatus='Underbehandling']), '\r\n',
	'Antall mapper med status "Avsluttet": ', count(descendant::a:mappe[a:saksstatus='Avsluttet']), '\r\n',
	'Antall mapper med status "Utgår": ', count(descendant::a:mappe[a:saksstatus='Utgår']), '\r\n',
	'Totalt: ', count(descendant::a:mappe), '\r\n', '\r\n',
	'Antall avsluttede møtemapper: ', count(descendant::a:mappe[@xsi:type='moetemappe'][string-length (a:avsluttetDato/text()) > 0]), '\r\n',
	'Antall møtemapper totalt: ', count(descendant::a:mappe[@xsi:type='moetemappe']))
#STOP#

[XML_QUERY]

job_id=C14
job_enabled=1 
job_name= Antall registreringer i arkivstrukturen
job_description= 

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Arkivdel "' , a:tittel , '":', '\r\n',
	'Antall forenklede registreringer: ', count(descendant::a:registrering[@xsi:type='registrering']), '\r\n',
	'Antall basisregistreringer: ', count(descendant::a:registrering[@xsi:type='basisregistrering']), '\r\n',
	'Antall journalposter: ', count(descendant::a:registrering[@xsi:type='journalpost']), '\r\n',
	'Antall møteregistreringer: ', count(descendant::a:registrering[@xsi:type='moeteregistrering']), '\r\n', 
	'Totalt: ', count(descendant::a:registrering))
#STOP#

[XML_QUERY]

job_id=C15
job_enabled=1 
job_name= Journalposttyper og journalposttilknytning
job_description= Journalposttyper og journalposttilknytning i arkivstrukturen (sakarkiver)

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Arkivdel "' , a:tittel , '":', '\r\n',
	'Antall inngående dokumenter: ', count(descendant::a:registrering[a:journalposttype='Inngående dokument']), '\r\n',
	'Antall utgående dokumenter: ', count(descendant::a:registrering[a:journalposttype='Utgående dokument']), '\r\n',
	'Antall organinterne dokumenter for oppfølging: ', count(descendant::a:registrering[a:journalposttype='Organinternt dokument for oppfølging']), '\r\n',
	'Antall organinterne dokumenter uten oppfølging: ', count(descendant::a:registrering[a:journalposttype='Organinternt dokument uten oppfølging']), '\r\n', 
	'Antall saksfremlegg: ', count(descendant::a:registrering[a:journalposttype='Saksframlegg']), '\r\n', '\r\n',
	'Antall journalposter med hoveddokument: ', count(descendant::a:registrering/a:dokumentbeskrivelse[a:tilknyttetRegistreringSom='Hoveddokument']), '\r\n',
	'Antall journalposter uten hoveddokument: ', count(descendant::a:registrering[not(a:dokumentbeskrivelse/a:tilknyttetRegistreringSom='Hoveddokument')]))
#STOP#

[XML_QUERY]

job_id=C19
job_enabled=1 
job_name= Antall registreringer uten dokumentbeskrivelse i arkivstrukturen
job_description= 

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Arkivdel "' , a:tittel , '":', '\r\n',
	'Registreringer uten dokumentbeskrivelse: ', count(descendant::a:registrering[not (a:dokumentbeskrivelse)]/a:registreringsID))
#STOP#

[XML_QUERY]

job_id=C20
job_enabled=1 
job_name= Journalpostenes status
job_description= 

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Arkivdel "' , a:tittel , '":', '\r\n',
	'Antall med status "Arkivert": ', count(descendant::a:registrering[a:journalstatus='Arkivert']), '\r\n',
	'Antall med status "Utgår": ', count(descendant::a:registrering[a:journalstatus='Utgår']), '\r\n',
	'Antall med status "Journalført": ', count(descendant::a:registrering[a:journalstatus='Journalført']), '\r\n',
	'Antall med annen status: ', count(descendant::a:registrering[not(a:journalstatus='Arkivert')][not(a:journalstatus='Utgår')][not(a:journalstatus='Journalført')]))
#STOP#

[XML_QUERY]

job_id=C21
job_enabled=1 
job_name= Antall dokumentbeskrivelser
job_description= 

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Arkivdel "' , a:tittel , '":', '\r\n', 'Antall dokumentbeskrivelser: ', count(descendant::a:dokumentbeskrivelse))
#STOP#

[XML_QUERY]

job_id=C22
job_enabled=1 
job_name= Antall dokumentbeskrivelser uten dokumentobjekt
job_description= 

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Arkivdel "' , a:tittel , '":', '\r\n', 'Antall dokumentbeskrivelser uten dokumentobjekt: ', count(descendant::a:dokumentbeskrivelse[not(a:dokumentobjekt)]))
#STOP#

[XML_QUERY]

job_id=C23
job_enabled=1 
job_name= Dokumentbeskrivelsens status
job_description= 

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Arkivdel "' , a:tittel , '":', '\r\n',
	'Antall med status "Dokumentet er ferdigstilt": ', count(descendant::a:dokumentbeskrivelse[a:dokumentstatus='Dokumentet er ferdigstilt']), '\r\n',
	'Antall med status "Dokumentet er under redigering": ', count(descendant::a:dokumentbeskrivelse[a:dokumentstatus='Dokumentet er under redigering']), '\r\n',
	'Antall med annen status: ', count(descendant::a:dokumentbeskrivelse[not(a:dokumentstatus='Dokumentet er ferdigstilt')][not(a:dokumentstatus='Dokumentet er under redigering')]))
#STOP#

[XML_QUERY]

job_id=C24
job_enabled=1 
job_name= Antall forekomster av dokumentobjekt
job_description= 

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Arkivdel "' , a:tittel , '": ', '\r\n', 'Antall dokumentobjekt: ', count(descendant::a:dokumentobjekt))
#STOP#


[XML_QUERY]

job_id=F01
job_enabled=1 
job_name= Antall saksparter i arkivstrukturen
job_description= 

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Arkivdel "' , a:tittel , '": ', '\r\n', 'Antall saksparter: ', count(descendant::a:sakspart))
#STOP#

[XML_QUERY]

job_id=F02
job_enabled=1 
job_name= Antall merknader i arkivstrukturen
job_description= 

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Arkivdel "' , a:tittel , '":', '\r\n',
                'Antall merknader på mappenivå: ', count(descendant::a:mappe/a:merknad), '\r\n',
                'Antall merknader på registreringsnivå: ', count(descendant::a:registrering/a:merknad), '\r\n',
                'Antall merknader på dokumentnivå: ', count(descendant::a:dokumentbeskrivelse/a:merknad))
#STOP#

[XML_QUERY]

job_id=F03
job_enabled=1 
job_name= Antall kryssreferanser i arkivstrukturen
job_description= 

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Arkivdel "' , a:tittel , '":', '\r\n',
                'Antall kryssreferanser fra klasser: ', count(descendant::a:klasse/a:kryssreferanse/*), '\r\n',
                'Antall kryssreferanser fra mapper: ', count(descendant::a:mappe/a:kryssreferanse/*), '\r\n',
                'Antall kryssreferanser fra registreringer: ', count(descendant::a:registrering/a:kryssreferanse/*))
#STOP#

[XML_QUERY]

job_id=F04
job_enabled=1 
job_name= Antall presedenser i arkivstrukturen
job_description= 

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Arkivdel "' , a:tittel , '":', '\r\n',
                'Antall presedenser i saksmapper: ', count(descendant::a:mappe/a:presedens), '\r\n',
                'Antall presedenser i journalposter: ', count(descendant::a:registrering[@xsi:type='journalpost']/a:presedens))
#STOP#

[XML_QUERY]

job_id=F05
job_enabled=1 
job_name= Antall korrespondanseparter i arkivstrukturen
job_description= 

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Arkivdel "' , a:tittel , '":', '\r\n',
                'Antall korrespondanseparter: ', count(descendant::a:korrespondansepart/a:korrespondansepartNavn), '\r\n',
                '(', count(descendant::a:registrering[@xsi:type='journalpost'][not(a:journalstatus='Utgår')]), ' journalposter eksl. journalstatus utgår)')
#STOP#

[XML_QUERY]

job_id=F06
job_enabled=1 
job_name= Antall avskrivninger i arkivstrukturen
job_description= 

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Arkivdel "' , a:tittel , '":', '\r\n',
      'Antall journalposter som avskrives av andre journalposter: ',
      count(descendant::a:registrering[@xsi:type='journalpost']/a:avskrivning[string-length(a:referanseAvskrivesAvJournalpost)>0]/a:referanseAvskrivesAvJournalpost), '\r\n',
      'Antall avskrevne journalposter: ',
      count(descendant::a:registrering[@xsi:type='journalpost']/a:avskrivning[string-length(a:avskrivningsmaate)>0]/a:avskrivningsmaate))
#STOP#

[XML_QUERY]

job_id=F07
job_enabled=1 
job_name= Antall dokumentflyter i arkivstrukturen
job_description= 

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Arkivdel "' , a:tittel , '":', '\r\n', 
      'Antall journalposter med dokumentflyt: ', count(descendant::a:registrering[@xsi:type='journalpost']/a:dokumentflyt))
#STOP#

[XML_QUERY]

job_id=F08
job_enabled=1 
job_name= Antall skjerminger i arkivstrukturen
job_description= 

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Arkivdel "' , a:tittel , '":', '\r\n',
      'Antall skjerminger i arkivdel: ', count(//a:arkivdel/a:skjerming), '\r\n',
      'Antall skjerminger i klasser: ', count(descendant::a:klasse/a:skjerming), '\r\n',
      'Antall skjerminger i mapper: ', count(descendant::a:mappe/a:skjerming), '\r\n',
      'Antall skjerminger i registreringer: ', count(descendant::a:registrering/a:skjerming), '\r\n',
      'Antall skjerminger i dokumentbeskrivelse: ', count(descendant::a:dokumentbeskrivelse/a:skjerming))
#STOP#

[XML_QUERY]

job_id=F09
job_enabled=1 
job_name= Antall graderinger i arkivstrukturen
job_description= 

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Arkivdel "' , a:tittel , '":', '\r\n',
      'Antall graderinger i arkivdel: ', count(//a:arkivdel/a:gradering), '\r\n',
      'Antall graderinger i klasse: ', count(descendant::a:klasse/a:gradering), '\r\n',
      'Antall graderinger i mappe: ', count(descendant::a:mappe/a:gradering), '\r\n',
      'Antall graderinger i registrering: ', count(descendant::a:registrering/a:gradering), '\r\n',
      'Antall graderinger i dokumentbeskrivelse: ', count(descendant::a:dokumentbeskrivelse/a:gradering))
#STOP#

[XML_QUERY]

job_id=F10
job_enabled=1 
job_name= Antall kassasjonsvedtak i arkivstrukturen
job_description= 

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Arkivdel "' , a:tittel , '":', '\r\n',
      'Antall kassasjonsvedtak i arkivdel: ', count(//a:arkivdel/a:kassasjon), '\r\n',
      'Antall kassasjonsvedtak i klasse: ', count(descendant::a:klasse/a:kassasjon), '\r\n',
      'Antall kassasjonsvedtak i mappe: ', count(descendant::a:mappe/a:kassasjon), '\r\n',
      'Antall kassasjonsvedtak i registrering: ', count(descendant::a:registrering/a:kassasjon), '\r\n',
      'Antall kassasjonsvedtak i dokumentbeskrivelse: ', count(descendant::a:dokumentbeskrivelse/a:kassasjon))
#STOP#

[XML_QUERY]

job_id=F11
job_enabled=1 
job_name= Antall kassasjonsvedtak i arkivstrukturen
job_description= 

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Arkivdel "' , a:tittel , '": ', '\r\n', 
      'Antall utførte kassasjoner: ', count(descendant::a:dokumentbeskrivelse/a:utfoertKassasjon))
#STOP#

[XML_QUERY]

job_id=F12
job_enabled=1 
job_name= Antall kassasjonsvedtak i arkivstrukturen
job_description= 

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Arkivdel "' , a:tittel , '": ', '\r\n',
      'Antall konverterte dokumenter: ', count(descendant::a:konvertering))
#STOP#

[XML_QUERY]

job_id=F13
job_enabled=1 
job_name= Antall utførte slettinger utenom kassasjon i arkivstrukturen
job_description= 

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Arkivdel "' , a:tittel , '": ', '\r\n',
      'Antall slettede dokumenter: ', count(descendant::a:sletting))
#STOP#

[XML_QUERY]

job_id=H01
job_enabled=1 
job_name= Antall journalposter i løpende journal
job_description= 

system=noark5 
subsystem= 
source=loependeJournal.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Antall journalregistreringer i loependeJournal: ', count(//l:journalregistrering))
#STOP#

[XML_QUERY]

job_id=H04
job_enabled=1 
job_name= Antall skjermede journalposter i løpende journal
job_description= 

system=noark5 
subsystem= 
source=loependeJournal.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Antall skjermede journalposter i loependeJournal: ', count(//l:journalregistrering[l:journalpost[l:tilgangsrestriksjon]]))
#STOP#

[XML_QUERY]

job_id=H05
job_enabled=1 
job_name= Antall journalposter i offentlig journal
job_description= 

system=noark5 
subsystem= 
source=offentligJournal.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Antall journalregistreringer i offentligJournal: ', count(//o:journalregistrering))
#STOP#

[XML_QUERY]

job_id=J01
job_enabled=1 
job_name= Antall endringer i endringslogg
job_description= 

system=noark5 
subsystem= 
source=endringslogg.xml 
target=noark5_analyse_{dt}.log

#START#
concat('Antall endringer i endringslogg: ', count(//e:endring))
#STOP#

[SQL_QUERY]

job_id=ESA01 
job_enabled=0 
job_name=Antall saker per arkivdel 
job_description=

system=noark5 
subsystem= 
source=arkivstruktur.xml 
target=noark5_analyse_{dt}.log

server=127.0.0.1 
database=t01testdb04 
user=t01testdb04u 
psw=test

#START# 
select count(*) from arkiv; 
#STOP#